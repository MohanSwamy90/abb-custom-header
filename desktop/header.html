<script type="text/discourse-plugin" version="0.8">
  const container = Discourse.__container__;
  const { ajax } = require("discourse/lib/ajax");
  const headerData={
    headerLogo:'https://dev.partnerhub.connect.abb.com/cdn/images/abb-logo.svg',
    headerText:'Connect Partner Hub',
    links:[{
      linkText:'Discover',
      linkUrl:'https://dev.partnerhub.connect.abb.com/discover/'
    },
    {
      linkText:'Learning',
      linkUrl:'https://dev.partnerhub.connect.abb.com/Learning/'
    },
    {
      linkText:'Project',
      linkUrl:'https://dev.partnerhub.connect.abb.com/Project/'
    },
    {
      linkText:'Idea Tank',
      linkUrl:'https://dev.partnerhub.connect.abb.com/IdeaTank/'
    },
    {
      linkText:'Developers',
      linkUrl:'https://developers.connect.abb.com/getting-started/'
    },
    {
      linkText:'Distributors',
      linkUrl:'https://dev.partnerhub.connect.abb.com/distributors/'
    },
    {
      linkText:'Repo',
      linkUrl:'https://dev.partnerhub.connect.abb.com/Repo/'
    },
    {
      linkText:'ESCO',
      linkUrl:'https://dev.partnerhub.connect.abb.com/esco/'
    }]
  };


  const currentUser = api.getCurrentUser();

  console.log(currentUser);

  api.registerConnectorClass('above-site-header', 'abb-header', {
    tagName: "div.sticky-sidebar",
    setupComponent(args, component) {


      component.set('hostname', window.location.hostname);
      api.onPageChange((url) => {
        component.set("headerDetails",headerData)
      })
    }
  });
</script>

<script
  type="text/x-handlebars"
  data-template-name="/connectors/above-site-header/abb-header"
>
    <div class="header-container">
      <header class="header">
        <div class="header-content">
          <div class="title-content">
            <img alt="abb logo" class="abb-logo" width="60" height="60" src="{{headerDetails.headerLogo}}" class="abb-logo">
            <span class="abb-title"> {{headerDetails.headerText}} </span>
          </div>
          <ul class="nav-list">
            {{#each headerDetails.links as |l|}}
            <li>
              <div class="title-div">
                <div class="nav-item-content">
                  <div class="tile-div">
                    <div class="tile-name">
                      <a  href="{{l.linkUrl}}">{{l.linkText}}</a>
                    </div>   
                  </div>                 
                </div>                             
              </div>              
            </li>
            {{/each}}
          </ul>
          <div class="login-wrap">
            <div class="user-options-group p-2">
              <span class="expand-user-options">
                <div>
                  <img class="user-image" height="23" width="25" class="user-image" src="https://dev.partnerhub.connect.abb.com/cdn/images/avatar.svg"/>
                </div>
                <span class="user-name px-2">Kumar Karuppaiah</span>
              </span>
            </div>
          </div>
        </div>
      </header>
    </div>
</script>
